(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{254:function(e,t,n){"use strict";n.r(t);var r=n(4),o=n(0),a=n(24),c=n(118),u=n.n(c),l=n(32),i=n(85),s=n(110),p=n(245),d=n(294),h=n(292),m=n(222),g=n(67),f=n.n(g),v=n(122),y=n.n(v),C=n(123),b=n.n(C),E=n(295),S=n(244),k=n(224),P=n(256),w=n(44),B=n.n(w),T=n(11),j=n(227),O=n(28),R=n.n(O),D=n(76),M=function(e){return o.createElement(D.a,r.a({Component:o.lazy(function(){return Promise.all([n.e(2),n.e(5)]).then(n.bind(null,252))})},e))},N=function(e){return o.createElement(D.a,r.a({Component:o.lazy(function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,253))})},e))},I=R()(function(e){return{inputWrapper:{color:e.palette.common.black,margin:e.spacing(4)}}})(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.c(t,e),t.prototype.renderInput=function(){var e=this.props,t=e.type,n=e.value,a=e.onChange,c=e.link,u=n||"",l=r.a({},this.props,{classes:void 0,value:u});switch(t){case"ajax_dropdown":return o.createElement(M,r.a({},l,{link:c}));case"avatar":return o.createElement(N,r.a({},l));case"text":default:return l.searchable=void 0,o.createElement(j.a,r.a({},l,{onChange:a?function(e){return a(e.target.value)}:void 0,variant:"outlined",color:"inherit",fullWidth:!0}))}},t.prototype.render=function(){var e=this.props.classes;return o.createElement("div",{className:e.inputWrapper},this.renderInput())},t}(o.Component)),U=Object(m.a)(function(e){return{paper:{zIndex:2050,position:"absolute",top:"15vh",left:"25vw",width:"50vw",color:e.palette.common.black,padding:e.spacing(4)},grow:{flexGrow:1},green:{background:f.a[400],color:e.palette.common.white},red:{background:B.a[400],color:e.palette.common.white,marginLeft:e.spacing(4)}}})(function(e){function t(t){var n=e.call(this,t)||this;return n.handleSubmit=n.handleSubmit.bind(n),n}return r.c(t,e),t.prototype.handleSubmit=function(e){var t=this.props.onSubmit;e.preventDefault(),t&&t()},t.prototype.renderActionButton=function(){var e=this.props,t=e.mode,n=e.classes;switch(t){case T.d:return o.createElement(h.a,{type:"submit",className:n.green,variant:"contained"},"Create");case T.f:return o.createElement(h.a,{type:"submit",color:"secondary",variant:"contained"},"Update");default:return null}},t.prototype.renderInputRows=function(){var e=this;return this.props.structure.map(function(t,n){return o.createElement(S.a,{key:n,container:!0},e.renderRow(t))})},t.prototype.renderRow=function(e){var t,n=this.props,a=n.values,c=n.onChangeInput,u=n.mode,l=e.filter(function(e){return u!=T.e||e.searchable});switch(12/l.length){case 12:t=12;break;case 6:t=6;break;case 4:t=4;break;case 3:t=3;break;default:t=2}return l.map(function(e,n){return o.createElement(S.a,{key:n,item:!0,md:t},o.createElement(I,r.a({onChange:function(t){return c(e.name,t)},value:a[e.name]},e)))})},t.prototype.renderMode=function(){switch(this.props.mode){case T.d:return"Create";case T.f:return"Update";default:return"Search"}},t.prototype.render=function(){var e=this.props,t=e.open,n=e.title,r=e.onClose,a=e.classes,c=e.search,u=e.onSearchModeToggle;return o.createElement(E.a,{open:t,onClose:r},o.createElement(k.a,{className:a.paper},o.createElement("form",{onSubmit:this.handleSubmit},o.createElement(s.a,{color:"inherit",variant:"h6",align:"center"},this.renderMode()," ",n),o.createElement(p.a,null),this.renderInputRows(),o.createElement(p.a,null),o.createElement(S.a,{container:!0},o.createElement(S.a,{item:!0,xs:12},o.createElement(d.a,{variant:"dense"},o.createElement(P.a,{onChange:u,checked:c}),o.createElement(s.a,{variant:"caption"},"Search"),o.createElement("div",{className:a.grow}),this.renderActionButton(),o.createElement(h.a,{className:a.red,variant:"contained",onClick:r},"Cancel")))))))},t}(o.Component)),A=n(248),x=n(249),F=n(247),L=n(246),W=n(250),z=n(293),G=n(257),J=n(251),_=n(255),q=n(84),H=n.n(q),K=n(68),Q=n.n(K),V=n(83),X=n.n(V),Y=n(121),Z=n.n(Y),$=n(120),ee=n.n($),te=n(157),ne=n(66),re=R()(function(){return{root:{width:32,height:32}}})(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.c(t,e),t.prototype.render=function(){var e=this.props,t=e.classes,n=e.value;return t?o.createElement(te.a,{src:Object(ne.a)(32,n),className:t.root}):null},t}(o.Component)),oe=R()(function(e){return{columnWrapper:{color:e.palette.common.black,margin:e.spacing(4)}}})(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.c(t,e),t.prototype.renderColumn=function(){var e=this.props,t=e.value,n=e.type;if(!t)return null;switch(n){case"ajax_dropdown":return t.label;case"avatar":return o.createElement(re,r.a({},this.props,{classes:void 0,value:t}));default:return t}},t.prototype.render=function(){var e=this.props.classes;return o.createElement("div",{className:e.columnWrapper},this.renderColumn())},t}(o.Component)),ae=Object(m.a)(function(e){return{greyBackground:{background:e.palette.grey[300],border:"solid 2px "+e.palette.common.white},sortButton:{color:e.palette.grey[500],marginRight:e.spacing(4)},editButton:{color:e.palette.primary.default,marginRight:e.spacing(4)},deleteButton:{color:B.a[600],marginRight:e.spacing(4)}}})(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.c(t,e),t.prototype.handleSort=function(e,t){var n=this.props.onSort;return function(){n(e.name,t)}},t.prototype.handleEditButtonClick=function(e){var t=this.props.onSelectToUpdate;return function(){t&&t(e)}},t.prototype.handleDeleteButtonClick=function(e){var t=this.props.onSelectToDelete;return function(){t&&t(e)}},t.prototype.renderCells=function(){var e=this,t=this.props,n=t.columns,r=t.classes;return Object.keys(n).map(function(t,a){var c=n[t].label;return o.createElement(L.a,{className:r.greyBackground,key:a},e.renderSortButton(n[t]),c)})},t.prototype.renderSortButton=function(e){var t=this.props,n=t.sortBy,r=t.sortMode,a=t.classes;return e.sortable?e.name!=n?o.createElement(G.a,{title:"Click To Sort By "+e.label},o.createElement(z.a,{onClick:this.handleSort(e,T.p),className:a.sortButton},o.createElement(ee.a,null))):r==T.p?o.createElement(G.a,{title:"Click To Sort By Descending Order"},o.createElement(z.a,{onClick:this.handleSort(e,T.q),className:a.sortButton},o.createElement(H.a,null))):o.createElement(G.a,{title:"Click To Sort By Asccending Order"},o.createElement(z.a,{onClick:this.handleSort(e,T.p),className:a.sortButton},o.createElement(Q.a,null))):null},t.prototype.renderActionCell=function(){var e=this.props,t=e.actions,n=e.classes;return t.includes("update")||t.includes("delete")?o.createElement(L.a,{className:n.greyBackground,variant:"head"},"Actions"):null},t.prototype.renderResultRows=function(){var e=this;return this.props.results.map(function(t,n){return e.renderResultRow(t,n)})},t.prototype.renderResultRow=function(e,t){var n=this.props,r=n.page,a=n.perPage;return o.createElement(F.a,{key:t},o.createElement(L.a,{variant:"body"},(r-1)*a+t+1),this.renderResultCells(e),this.renderResultActions(e))},t.prototype.renderResultCells=function(e){var t=this.props.columns;return Object.keys(t).map(function(n,a){var c=t[n];return o.createElement(L.a,{key:a},o.createElement(oe,r.a({},c,{value:e[n]})))})},t.prototype.renderResultActions=function(e){var t=this.props.actions;return t.includes("update")||t.includes("delete")?o.createElement(L.a,null,this.renderDeleteButton(e),this.renderEditButton(e)):null},t.prototype.renderDeleteButton=function(e){var t=this.props,n=t.actions,r=t.classes;return n.includes("delete")?o.createElement(G.a,{onClick:this.handleDeleteButtonClick(e),title:"Click To Delete"},o.createElement(z.a,{className:r.deleteButton},o.createElement(X.a,{color:"inherit"}))):null},t.prototype.renderEditButton=function(e){var t=this.props,n=t.actions,r=t.classes;return n.includes("update")?o.createElement(G.a,{title:"Click To Update"},o.createElement(z.a,{onClick:this.handleEditButtonClick(e),className:r.editButton},o.createElement(Z.a,{color:"inherit"}))):null},t.prototype.render=function(){var e=this.props,t=e.classes,n=e.page,r=e.perPage,a=e.count,c=e.onChangePage,u=e.onChangePerPage;return o.createElement(A.a,null,o.createElement(x.a,null,o.createElement(F.a,null,o.createElement(L.a,{className:t.greyBackground,variant:"head"},"#"),this.renderCells(),this.renderActionCell())),o.createElement(W.a,null,this.renderResultRows()),o.createElement(J.a,null,o.createElement(F.a,null,o.createElement(_.a,{count:a,rowsPerPage:r,page:n-1,onChangePage:c,onChangeRowsPerPage:u}))))},t}(o.Component)),ce=n(20),ue=n(34),le=n(26),ie=function(){return{type:T.c}},se=function(e){return function(t){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(n){return t(Object(ce.showLoading)()),ue.a.CRUD.info(e).then(function(n){var r=n.success,o=n.message,a=n.title,c=n.inputs,u=n.columns,l=n.structure,i=n.actions;t(Object(ce.hideLoading)()),r?(t(function(e){return{type:T.a,form:e}}(e)),t(function(e,t,n,r,o){return{type:T.g,title:e,inputs:t,columns:n,structure:r,actions:o}}(a,c,u,l,i))):o&&Object(le.c)(o)}),[2]})})}},pe=function(e,t,n,o,a,c){return function(u){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(r){return u(Object(ce.showLoading)()),ue.a.CRUD.search(e,t,n,o,a,c==T.p?"asc":"desc").then(function(e){var t=e.success,n=e.message,r=e.results,o=e.count;t?u(function(e,t){return{type:T.h,results:e,count:t}}(r,o)):n&&u(Object(le.c)(n))}),[2]})})}},de=Object(m.a)(function(e){return{grow:{flexGrow:1},green:{background:f.a[400]},margin:{margin:e.spacing(2)}}}),he=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChangeInput=n.handleChangeInput.bind(n),n.handleSort=n.handleSort.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleToggleSearchMode=n.handleToggleSearchMode.bind(n),n.handleSelectToDelete=n.handleSelectToDelete.bind(n),n.handleChangePage=n.handleChangePage.bind(n),n.handleChangePerPage=n.handleChangePerPage.bind(n),n}return r.c(t,e),t.prototype.componentDidMount=function(){var e=this.props.match.params.form,t=this.props,n=t.onChangeForm,r=t.values,o=t.page,a=t.perPage,c=t.sortedBy,u=t.onSearch,l=t.sortedMode;n(e),u(e,r,o,a,c,l)},t.prototype.componentDidUpdate=function(e){var t=this.props.match.params.form,n=this.props,r=n.onChangeForm,o=n.values,a=n.page,c=n.perPage,u=n.sortedBy,l=n.onSearch,i=n.sortedMode;t!==e.match.params.form&&(r(t),l(t,o,a,c,u,i))},t.prototype.handleChangeInput=function(e,t){var n,o=this.props,a=o.search,c=o.form,u=o.values,l=o.page,i=o.perPage,s=o.sortedBy,p=o.onSearch,d=o.onChangeInput,h=o.sortedMode;a&&p(c,r.a({},u,((n={})[e]=t,n)),l,i,s,h),d(e,t)},t.prototype.handleSort=function(e,t){var n=this.props,r=n.form,o=n.values,a=n.page,c=n.perPage,u=n.onSearch,l=n.onSort;u(r,o,a,c,e,t),l(e,t)},t.prototype.handleSubmit=function(){var e=this.props,t=e.form,n=e.mode,r=e.values,o=e.updatingId,a=e.onUpdate,c=e.onCreate,u=e.onClearForm,l=e.page,i=e.perPage,s=e.sortedBy,p=e.sortedMode;switch(n){case T.d:c(t,r,l,i,s,p);break;case T.f:o&&a(t,r,o,l,i,s,p);break;default:u()}},t.prototype.handleToggleSearchMode=function(){var e=this.props,t=e.search,n=e.form,r=e.values,o=e.page,a=e.perPage,c=e.sortedBy,u=e.onSearch,l=e.onToggleSearchMode,i=e.sortedMode;t||u(n,r,o,a,c,i),l()},t.prototype.handleSelectToDelete=function(e){var t=this.props,n=t.onSelectToDelete,r=t.onConfirm,o=t.onClearForm,a=t.onDelete,c=t.form,u=t.page,l=t.perPage,i=t.sortedBy,s=t.sortedMode;n(e.id),r("Are you sure you want to delete the record? Once you deleted you can not get it back.",function(){return o()},function(){return a(c,e.id,u,l,i,s)})},t.prototype.handleChangePage=function(e,t){var n=this.props,r=n.search,o=n.form,a=n.values,c=n.perPage,u=n.sortedBy,l=n.onSearch,i=n.onChangePage,s=n.sortedMode;r&&l(o,a,t+1,c,u,s),i(t+1)},t.prototype.handleChangePerPage=function(e){var t=this.props,n=t.search,r=t.form,o=t.values,a=t.page,c=t.sortedBy,u=t.onSearch,l=t.onChangePerPage,i=t.sortedMode;n&&u(r,o,a,parseInt(e.target.value),c,i),l(parseInt(e.target.value))},t.prototype.renderSearchButton=function(){var e=this.props,t=e.actions,n=e.classes,r=e.onSelectToSearch;return t.includes("search")?o.createElement(h.a,{className:n.margin,variant:"contained",color:"primary",onClick:r},o.createElement(y.a,null),"Search"):null},t.prototype.renderCreateButton=function(){var e=this.props,t=e.actions,n=e.classes,r=e.onSelectToCreate;return t.includes("create")?o.createElement(h.a,{className:u()(n.green,n.margin),variant:"contained",color:"primary",onClick:r},o.createElement(b.a,null),"Create"):null},t.prototype.render=function(){var e=this.props,t=e.classes,n=e.title,r=e.mode,a=e.values,c=e.onClearForm,u=e.search,l=e.structure,h=e.sortedBy,m=e.sortedMode,g=e.columns,f=e.results,v=e.actions,y=e.page,C=e.perPage,b=e.resultsCount,E=e.onSelectToUpdate;return o.createElement(i.a,null,o.createElement("div",null,o.createElement(d.a,{variant:"dense"},o.createElement(s.a,{variant:"h5"},n),o.createElement("div",{className:t.grow}),this.renderSearchButton(),this.renderCreateButton()),o.createElement(p.a,null),o.createElement(U,{open:r===T.e||r===T.d||r===T.f,values:a,title:n,onClose:c,mode:r,search:u,onSearchModeToggle:this.handleToggleSearchMode,structure:l,onChangeInput:this.handleChangeInput,onSubmit:this.handleSubmit}),o.createElement(ae,{results:f,sortBy:h,sortMode:m,columns:g,actions:v,page:y,perPage:C,count:b,onSort:this.handleSort,onSelectToUpdate:E,onSelectToDelete:this.handleSelectToDelete,onChangePage:this.handleChangePage,onChangePerPage:this.handleChangePerPage})))},t}(o.Component);t.default=Object(a.connect)(function(e){return r.a({},e.CRUDPage)},function(e){return{onChangeForm:function(t){return e(se(t))},onSelectToSearch:function(){return e({type:T.k})},onSelectToCreate:function(){return e({type:T.i})},onClearForm:function(){return e(ie())},onToggleSearchMode:function(){return e({type:T.r})},onChangeInput:function(t,n){return e(function(e,t){return{type:T.b,name:e,value:t}}(t,n))},onSearch:function(t,n,r,o,a,c){return e(pe(t,n,r,o,a,c))},onSort:function(t,n){return e(function(e,t){return{type:T.o,sortBy:e,sortMode:t}}(t,n))},onCreate:function(t,n,o,a,c,u){return e(function(e,t,n,o,a,c){return function(u){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(r){return u(Object(ce.showLoading)()),ue.a.CRUD.create(e,t).then(function(t){var r=t.success,l=t.message;r?(l&&u(Object(le.d)(l)),u(ie()),u(pe(e,{},n,o,a,c))):l&&u(Object(le.c)(l))}),[2]})})}}(t,n,o,a,c,u))},onUpdate:function(t,n,o,a,c,u,l){return e(function(e,t,n,o,a,c,u){return function(l){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(r){return l(Object(ce.showLoading)()),ue.a.CRUD.update(e,t,n).then(function(t){var n=t.success,r=t.message;n?(r&&l(Object(le.d)(r)),l(ie()),l(pe(e,{},o,a,c,u))):r&&l(Object(le.c)(r))}),[2]})})}}(t,n,o,a,c,u,l))},onSelectToUpdate:function(t){return e(function(e){return{type:T.l,result:e}}(t))},onSelectToDelete:function(t){return e(function(e){return{type:T.j,id:e}}(t))},onDelete:function(t,n,o,a,c,u){return e(function(e,t,n,o,a,c){return function(u){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(r){return u(Object(ce.showLoading)()),ue.a.CRUD.delete(e,t).then(function(t){var r=t.success,l=t.message;r?(l&&u(Object(le.d)(l)),u(ie()),u(pe(e,{},n,o,a,c))):l&&u(Object(le.c)(l))}),[2]})})}}(t,n,o,a,c,u))},onConfirm:function(t,n,r){return e(Object(le.b)(t,n,r))},onChangePage:function(t){return e(function(e){return{type:T.m,page:e}}(t))},onChangePerPage:function(t){return e(function(e){return{type:T.n,perPage:e}}(t))}}})(Object(l.e)(de(he)))}}]);